# 🚀 天机爻Wiki专业文档生成系统

## 📝 系统概述

这是一个基于DeepSeek API的专业Wiki文档生成和增强系统，专门为天机爻Wiki设计，能够生成高质量、学术性强的传统文化知识内容。

## ✨ 核心特性

### 🎯 专业提示词工程
- **学术严谨性**: 确保内容引用权威典籍和现代研究成果
- **结构化生成**: 自动生成清晰的层级标题和逻辑结构
- **SEO优化**: 内置关键词优化和元数据生成
- **文化尊重**: 以传承传统文化为目标，避免迷信色彩

### 🔬 智能文档分析
- **类型识别**: 自动识别八字、紫微、AI玄学等文档类型
- **质量评估**: 多维度质量检查和优化建议
- **内容增强**: 基于现有内容进行专业化改写和扩展

### 📚 权威资源引用
- **经典文献**: 《渊海子平》、《三命通会》、《紫微斗数全书》等
- **学术机构**: 中国易学文化研究会、北京大学哲学系等
- **现代研究**: 结合心理学、统计学等现代学科观点
- **可信百科**: 维基百科、百度百科等权威来源

## 🛠️ 快速开始

### 1. 环境配置

```bash
# 克隆项目（如果需要）
cd /Users/yunchen/code/tianjiyao-wiki

# 安装依赖
pip install -r requirements.txt

# 设置API密钥
export DEEPSEEK_API_KEY="your_deepseek_api_key_here"
```

### 2. 基础使用

#### 测试功能
```bash
# 测试API连接和提示词生成
python test_enhance.py
```

#### 增强现有文档
```bash
# 增强所有文档
python enhance_docs.py --api-key $DEEPSEEK_API_KEY --action enhance

# 增强特定类型文档
python enhance_docs.py --api-key $DEEPSEEK_API_KEY --action enhance --docs-path docs/bazi
```

#### 创建新文档
```bash
# 创建新的八字命理文档
python enhance_docs.py \
  --api-key $DEEPSEEK_API_KEY \
  --action create \
  --title "大运流年分析方法" \
  --type "八字命理" \
  --output "docs/bazi/dayun-analysis.md" \
  --length 4000
```

### 3. 批量处理

```bash
# 使用交互式脚本
./batch_enhance.sh -k $DEEPSEEK_API_KEY -m enhance -t bazi

# 分析现有文档结构
./batch_enhance.sh -m analyze

# 交互式创建新文档
./batch_enhance.sh -k $DEEPSEEK_API_KEY -m create
```

## 📊 专业提示词系统

### 提示词核心结构

我们为每种文档类型设计了专门的提示词模板：

#### 1. 学术专业性要求
- 引用权威典籍和现代研究成果
- 准确定义重要概念
- 添加历史发展脉络

#### 2. 内容结构优化
- 清晰的层级标题结构
- 实例说明和案例分析
- 相关词汇表和术语解释

#### 3. SEO和用户体验
- 关键词自然融入
- 内部链接建议
- 相关阅读推荐

#### 4. 现代化视角
- 结合现代研究成果
- 理性客观的学术态度
- 避免迷信色彩

### 示例提示词（八字命理）

```
作为一名资深的八字命理学者和研究专家，请帮我完善这篇关于《十神体系详解》的Wiki文档。

## 完善要求：

### 1. 学术专业性
- 确保内容学术严谨，引用权威典籍如《渊海子平》、《三命通会》等
- 重要概念要有准确的定义和解释  
- 添加历史发展脉络和理论演进过程
- 关键术语：八字、四柱、天干地支、五行、十神、格局

### 2. 权威资料引用
- 经典文献：《渊海子平》、《三命通会》、《滴天髓》等
- 学术机构：中国易学文化研究会、北京大学哲学系等
- 可以适当引用维基百科、百度百科等的客观内容
- 所有引用必须标注来源

### 3. 内容结构优化
- 使用清晰的层级标题结构
- 添加实例说明和案例分析
- 包含相关词汇表或术语解释

### 4. SEO和用户体验
- 优化关键词密度（自然融入）
- 添加内部链接建议
- 创建相关阅读推荐
- 包含FAQ常见问题解答

### 5. 现代化视角
- 结合现代研究成果和科学观点
- 讨论在当代的应用和发展
- 与现代心理学、统计学等的关联
- 理性客观的态度，避免迷信色彩

### 6. 质量标准
- 目标字数：3000字左右
- 语言风格：学术性但易懂
- 保持中性客观的学术态度
- 强调文化传承和理性学习

请基于以上要求，生成一篇高质量、专业性强的Wiki文档。
```

## 🎨 生成内容质量标准

### 文档结构示例

```markdown
---
layout: default
title: 八字十神体系详解
description: 深入解析八字命理中的十神理论，包括比肩、劫财、食神等十神的含义、特点和实际应用方法
keywords: [八字, 十神, 比肩, 劫财, 食神, 伤官, 正财, 偏财, 正官, 七杀, 正印, 偏印, 命理学]
breadcrumbs:
  - name: 首页
    url: /
  - name: 八字命理
    url: /bazi/
  - name: 十神体系详解
---

# 八字十神体系详解

## 概述

十神是八字命理学中的核心概念，由宋代徐子平在《渊海子平》中系统阐述...

## 历史发展

### 理论起源
十神理论的萌芽可以追溯到唐代...

### 系统建立  
宋代徐子平在《渊海子平》中首次系统性地提出了十神理论...

### 理论完善
明代《三命通会》进一步完善了十神体系...

## 十神分类

### 基本分类原则
十神的划分基于日主与其他天干的生克关系...

#### 同我者
- **比肩**: 与日主同性同五行
- **劫财**: 与日主异性同五行

#### 我生者  
- **食神**: 日主同性所生
- **伤官**: 日主异性所生

[详细内容继续...]

## 实际应用

### 性格分析
根据十神的强弱配置，可以分析一个人的性格特点...

### 运势判断
十神在不同宫位的表现，反映了不同方面的运势...

## 现代研究

现代心理学研究表明，十神理论在某种程度上与人格类型学有相似之处...

## 案例分析

### 案例一：比肩格局
某命主八字为：甲子年、丙寅月、甲午日、乙亥时...

## 常见问题

**Q: 十神之间有优劣之分吗？**
A: 传统命理学认为十神本身无好坏之分...

## 参考资料

1. 徐子平.《渊海子平》[M]. 宋代原著
2. 万民英.《三命通会》[M]. 明代. 
3. [八字命理学研究](https://zh.wikipedia.org/wiki/八字). 维基百科
4. [十神理论](https://baike.baidu.com/item/十神). 百度百科
5. 中国易学文化研究会. 《现代易学研究》[J]. 2023

## 相关阅读

- [八字命理入门](introduction.md)
- [五行理论详解](wuxing.md)  
- [大运流年分析](dayun.md)
- [格局判断方法](geju.md)

---

*本文内容仅供学术研究和文化传承使用，请以理性态度对待传统命理学。*
```

## 📋 使用指南

### 增强现有文档流程

1. **备份原文档**（自动完成）
2. **分析文档类型**（自动识别）
3. **生成专业提示词**
4. **调用DeepSeek API**
5. **质量检查和保存**

### 创建新文档流程

1. **确定标题和类型**
2. **生成基础结构**
3. **API增强内容**
4. **格式化和优化**
5. **保存到指定位置**

### 质量控制

- **自动备份**: 处理前自动创建备份文件
- **内容验证**: 检查生成内容的完整性
- **格式检查**: 验证Markdown和YAML格式
- **人工审核**: 建议人工审核关键内容

## ⚙️ 配置文件说明

### docs_config.py

包含完整的配置选项：

- **QUALITY_STANDARDS**: 文档质量标准
- **TERMINOLOGY**: 专业术语词典  
- **TRUSTED_SOURCES**: 可信来源列表
- **CONTENT_STRUCTURE**: 内容结构模板
- **SEO_CONFIG**: SEO优化配置

### 自定义配置

```python
# 修改目标文档长度
QUALITY_STANDARDS["target_length"] = 4000

# 添加新的专业术语
TERMINOLOGY["八字命理"]["基础术语"].append("新术语")

# 添加可信来源
TRUSTED_SOURCES["学术机构"].append("新机构名称")
```

## 🚨 注意事项

### API使用限制
- 注意DeepSeek API的调用频率限制
- 监控API使用量避免超额
- 合理设置重试机制

### 内容质量控制
- 生成内容需要人工审核
- 重要事实需要二次验证
- 保持文化敏感性

### 最佳实践
1. **小批量测试**: 先在少量文档上测试效果
2. **分类处理**: 按文档类型分批处理
3. **质量优先**: 重视内容质量而非数量
4. **持续优化**: 根据效果调整提示词

## 📈 效果预期

### 内容质量提升
- **专业性**: 大幅提升学术严谨性
- **可读性**: 保持通俗易懂的表达
- **完整性**: 补充缺失的重要信息
- **权威性**: 添加可信的资料引用

### SEO效果优化
- **关键词优化**: 自然融入目标关键词
- **结构优化**: 清晰的标题层级结构
- **元数据完善**: 优化title、description等
- **内链建设**: 合理的内部链接布局

### 用户体验改善
- **导航清晰**: 面包屑和目录结构
- **内容丰富**: 深度和广度并重
- **学习友好**: 适合不同层次读者
- **文化价值**: 体现传统文化传承意义

## 🆘 故障排除

### 常见问题

**Q: API调用失败？**
- 检查API密钥是否正确
- 确认网络连接正常
- 查看是否超出调用限制

**Q: 生成内容质量不理想？**
- 调整提示词参数
- 增加更具体的要求
- 尝试不同的温度参数

**Q: 文档格式错误？**
- 检查Markdown语法
- 验证YAML front matter
- 确认编码格式为UTF-8

## 📞 技术支持

如需帮助或有改进建议：

- **项目仓库**: GitHub Issues
- **文档问题**: 在相关页面留言
- **功能建议**: 通过邮件联系开发团队

---

*让我们一起打造专业、权威、有深度的传统文化知识库！*